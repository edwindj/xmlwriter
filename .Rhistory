)
doc <- fragment("study", .attr = c(id="1"),
person = elem(name = "John Doe", age = "30", .attr = c(id = "p1")),
person = elem(name = "Jane Doe", age = "25",
address = elem(street = "123 Main St", city = "Springfield")
)
)
doc |> as_xml_document()
doc |> as.character()
elem("person")
e <- environment()
e <- environment()
#' Create an XML fragment
#'
#' Create an xml fragment
#' @export
#' @param root the name of the root element
#' @param ... elements to include in the fragment
#' @param .attr attributes
#' @rdname fragment
#' @example example/fragment.R
fragment <- function(root, ..., .attr = list()){
e <- environment()
e$text <- function(text){list(as.character(text))}
root_elem <- elem(..., .attr)
f <- list(root_elem) |>
setNames(root)
class(f) <- "xml_fragment_list"
f
}
fragment()
fragment("test")
fragment("test") |> str()
fragment("test") |> str()
fragment("test", b = "2") |> str()
fragment("test", b = "2")
fragment("test", b = "2")
fragment("test", b = "2") |> str()
fragment("test", b = "2", text(33)) |> str()
#' Create an XML fragment
#'
#' Create an xml fragment
#' @export
#' @param root the name of the root element
#' @param ... elements to include in the fragment
#' @param .attr attributes
#' @rdname fragment
#' @example example/fragment.R
fragment <- function(root, ..., .attr = list()){
e <- parent.frame()
e$text <- function(text){list(as.character(text))}
root_elem <- elem(..., .attr)
f <- list(root_elem) |>
setNames(root)
class(f) <- "xml_fragment_list"
f
}
fragment("test", b = "2", text(33)) |> str()
text()
text
#' Create an XML fragment
#'
#' Create an xml fragment
#' @export
#' @param root the name of the root element
#' @param ... elements to include in the fragment
#' @param .attr attributes
#' @rdname fragment
#' @example example/fragment.R
fragment <- function(root, ..., .attr = list()){
e <- sys.frame()
e$text <- function(text){list(as.character(text))}
root_elem <- elem(..., .attr)
f <- list(root_elem) |>
setNames(root)
class(f) <- "xml_fragment_list"
f
}
fragment("test", b = "2", text(33)) |> str()
text
rm(text)
fragment("test", b = "2", text(33)) |> str()
text
devtools::load_all(".")
fragment
fragment("test", b = "2", text(33)) |> str()
text
#' Create an XML fragment
#'
#' Create an xml fragment
#' @export
#' @param root the name of the root element
#' @param ... elements to include in the fragment
#' @param .attr attributes
#' @rdname fragment
#' @example example/fragment.R
fragment <- function(root, ..., .attr = list()){
print(sys.frame())
e <- sys.frame()
e$text <- function(text){list(as.character(text))}
root_elem <- elem(..., .attr)
f <- list(root_elem) |>
setNames(root)
class(f) <- "xml_fragment_list"
f
}
fragment("test", b = "2", text(33)) |> str()
devtools::load_all(".")
fragment("test", b = "2", text(33)) |> str()
devtools::load_all(".")
fragment("test", b = "2", text(33)) |> str()
devtools::load_all(".")
fragment("test", b = "2", text(33)) |> str()
rm(text)
devtools::load_all(".")
fragment("test", b = "2", text(33)) |> str()
devtools::load_all(".")
fragment("test", b = "2", text(33)) |> str()
devtools::load_all(".")
fragment("test", b = "2", text(33)) |> str()
#' Create an XML fragment
#'
#' Create an xml fragment
#' @export
#' @param root the name of the root element
#' @param ... elements to include in the fragment
#' @param .attr attributes
#' @rdname fragment
#' @example example/fragment.R
fragment <- function(root, ..., .attr = list()){
e <- parent.frame(n = 1)
print(e)
e$text <- function(text){list(as.character(text))}
root_elem <- elem(..., .attr)
f <- list(root_elem) |>
setNames(root)
class(f) <- "xml_fragment_list"
f
}
devtools::load_all(".")
fragment("test", b = "2", text(33)) |> str()
devtools::load_all(".")
fragment("test", b = "2", text(33)) |> str()
devtools::load_all(".")
fragment("test", b = "2", text(33)) |> str()
devtools::load_all(".")
fragment("test", b = "2", text(33)) |> str()
devtools::load_all(".")
fragment("test", b = "2", text(33)) |> str()
f <- function(...){ alist(... )}
f(a = 3)
f <- function(...){ substitute(...)}
f(a = 3)
f <- function(...){ substitute(..., list(...))}
f(a = 3)
f <- function(...){ substitute(list(...), ...)}
f(a = 3)
f <- function(...){ substitute(list(...), list(...))}
f(a = 3)
f <- function(...){ substitute(list(...))}
f(a = 2)
f(a = b)
txt <- function(text){
list(as.character(text))
}
devtools::load_all(".")
doc <- fragment("study", .attr = c(id="1"),
person = elem(name = "John Doe", age = "30", .attr = c(id = "p1")),
person = elem(name = "Jane Doe", age = "25",
address = elem(street = "123 Main St", city = "Springfield")
)
)
devtools::load_all(".")
doc <- fragment("study", .attr = c(id="1"),
person = elem(name = "John Doe", age = "30", .attr = c(id = "p1")),
person = elem(name = "Jane Doe", age = "25",
address = elem(street = "123 Main St", city = "Springfield")
)
)
doc |> as_xml_document()
doc |> as.character()
source("~/Documents/R/xmlwriter/example/fragment.R", echo=TRUE)
devtools::load_all(".")
source("~/Documents/R/xmlwriter/example/fragment.R", echo=TRUE)
doc |> as.character()
doc |> str()
source("~/Documents/R/xmlwriter/R/fragment.R", echo=TRUE)
devtools::load_all(".")
doc |> str()
source("~/Documents/R/xmlwriter/example/fragment.R", echo=TRUE)
doc <- fragment("study", .attr = c(id="1"),
person = elem(
.attr = c(id = "p1"),
name = txt("John Doe"),
age = txt("30")
),
person = elem(
name = "Jane Doe",
age = "25",
address = elem(street = "123 Main St", city = "Springfield")
)
)
doc |> str()
doc |> as.character()
doc |> str()
doc <- fragment("study", .attr = c(id="1"),
person = elem(
.attr = c(id = "p1"),
name = txt("John Doe"),
age = txt("30")
),
person = elem(
name = "Jane Doe",
age = "25",
address = elem(street = "123 Main St", city = "Springfield"),
txt("This is a text node")
)
)
doc |> str()
doc |> as.character()
devtools::load_all(".")
doc <- fragment("study", .attr = c(id="1"),
person = .elem(
.attr = c(id = "p1"),
name = txt("John Doe"),
age = txt("30")
),
person = .elem(
name = "Jane Doe",
age = "25",
address = elem(street = "123 Main St", city = "Springfield"),
.text("This is a text node")
)
)
source("~/Documents/R/xmlwriter/example/fragment.R", echo=TRUE)
devtools::load_all(".")
source("~/Documents/R/xmlwriter/example/fragment.R", echo=TRUE)
source("~/Documents/R/xmlwriter/example/fragment.R", echo=TRUE)
source("~/Documents/R/xmlwriter/example/fragment.R", echo=TRUE)
devtools::load_all(".")
source("~/Documents/R/xmlwriter/example/fragment.R", echo=TRUE)
devtools::load_all(".")
source("~/Documents/R/xmlwriter/example/fragment.R", echo=TRUE)
doc |> xml2::as_list()
doc |> unclass(doc) |> xml2::as_list()
doc |> unclass() |> xml2::as_list()
doc |> unclass() |> xml2::as_xml_document()
doc |> xml2::as_xml_document()
doc |> unclass() |> xml2::as_xml_document()
doc |> as.character()
doc |> as.character() |> xml2::read_xml()
doc |> str()
doc <- fragment("study", .attr = c(id="1"),
person = .elem(
.attr = c(id = "p1"),
name = .text("John Doe"),
age = .text("30")
),
person = .e(
name = "Jane Doe",
age = "25",
address = .n(street = "123 Main St", city = "Springfield"),
.n("This is a text node")
)
)
doc <- fragment("study", .attr = c(id="1"),
person = .elem(
.attr = c(id = "p1"),
name = .text("John Doe"),
age = .text("30")
),
person = .elem(
name = "Jane Doe",
age = "25",
address = .n(street = "123 Main St", city = "Springfield"),
.text("This is a text node")
)
)
doc <- fragment("study", .attr = c(id="1"),
person = .elem(
.attr = c(id = "p1"),
name = .text("John Doe"),
age = .text("30")
),
person = .elem(
name = "Jane Doe",
age = "25",
address = .elem(street = "123 Main St", city = "Springfield"),
.text("This is a text node")
)
)
doc |> unclass() |> xml2::as_xml_document()
doc |> as.character() |> xml2::read_xml()
doc |> str()
person = .elem(
name = "Jane Doe",
age = "25",
address = .elem(street = "123 Main St", city = "Springfield"),
.text("This is a text node")
)
person
doc <- fragment("study", .attr = c(id="1"),
person = .elem(
.attr = c(id = "p1"),
name = .text("John Doe"),
age = .text("30")
),
person = .elem(
name = "Jane Doe",
age = 25,
address = .elem(street = "123 Main St", city = "Springfield"),
.text("This is a text node")
)
)
doc |> unclass() |> xml2::as_xml_document()
doc |> as.character() |> xml2::read_xml()
doc |> str()
doc |> unclass() |> xml2::as_xml_document()
doc |> as.character() |> xml2::read_xml()
doc |> str()
doc <- fragment("study", .attr = c(id="1"),
person = .elem(
.attr = c(id = "p1"),
name = .text("John Doe"),
age = "30"
),
person = .elem(
name = "Jane Doe",
age = 25,
address = .elem(street = "123 Main St", city = "Springfield"),
.text("This is a text node")
)
)
doc <- fragment("study", .attr = c(id="1"),
person = .elem(
.attr = c(id = "p1"),
name = .text("John Doe"),
age = 30
),
person = .elem(
name = "Jane Doe",
age = 25,
address = .elem(street = "123 Main St", city = "Springfield"),
.text("This is a text node")
)
)
doc |> unclass() |> xml2::as_xml_document()
doc |> as.character() |> xml2::read_xml()
devtools::load_all(".")
doc |> as.character() |> xml2::read_xml()
doc |> as.character() |> as_xml_document()
doc
str(doc)
doc  |> as_xml_document()
doc |> as_xml_document()
str(doc)
doc  |> as_xml_document()
doc  |> as_xml_document.xml_fragment_list()
devtools::load_all(".")
devtools::load_all(".")
doc  |> as_xml_document.xml_fragment_list()
devtools::load_all(".")
devtools::load_all(".")
doc  |> as_xml_document.xml_fragment_list()
doc  |> as_xml_document()
devtools::load_all(".")
devtools::load_all(".")
doc  |> as_xml_document()
doc  |> as_xml_document()
library(xml2)
doc  |> as_xml_document()
doc  |> xml2::as_xml_document()
doc
xml2::as_xml_document
detach("package:xml2", unload = TRUE)
doc  |> xml2::as_xml_document()
doc  |> unclass(doc) |> xml2::as_xml_document()
doc  |> unclass() |> xml2::as_xml_document()
doc  |> xml2::as_xml_document()
f <- fragment(
root = "persoon",
name = "John Doe",
age = 30,
address = .elem(
street = "123 Main St",
city = "Anytown",
state = "CA",
zip = 12345
)
)
f <- fragment(
root = "persoon",
name = "John Doe",
age = 30,
address = .elem(
street = "123 Main St",
city = "Anytown",
state = "CA",
zip = 12345
)
)
f |> as.character()
print(f)
str(f)
f <- fragment(
root = "persoon",
name = "John Doe",
age = 30,
address = .elem(
street = "123 Main St",
city = "Anytown",
state = "CA",
zip = 12345
)
)
print(f)
str(f)
library(xmlwriter)
f <- fragment(
root = "persoon",
name = "John Doe",
age = 30,
address = .elem(
street = "123 Main St",
city = "Anytown",
state = "CA",
zip = 12345
)
)
print(f)
devtools::load_all(".")
print(f)
f <- fragment(
root = "persoon",
.attr = list(id = 1),
name = "John Doe",
age = 30,
address = .elem(
street = "123 Main St",
city = "Anytown",
state = "CA",
zip = 12345
)
)
print(f)
f <- fragment(
root = "persoon",
.attr = list(id = "1"),
name = "John Doe",
age = 30,
address = .elem(
street = "123 Main St",
city = "Anytown",
state = "CA",
zip = 12345
)
)
print(f)
as.list(character())
c(list(), list())
devtools::load_all(".")
doc <- fragment("study", .attr = c(id="1"),
person = .elem(
.attr = c(id = "p1"),
name = .text("John Doe"),
age = 30
),
person = .elem(
name = "Jane Doe",
age = 25,
address = .elem(street = "123 Main St", city = "Springfield"),
.text("This is a text node")
)
)
# doc |> unclass() |> xml2::as_xml_document()
# doc |> as.character() |> xml2::read_xml()
doc |> str()
# doc |> unclass() |> xml2::as_xml_document()
# doc |> as.character() |> xml2::read_xml()
doc |> as.character()
doc2 <- fragment("study", person = elem(name = "John Doe", age = 30))
doc2 <- fragment("study", person = .elem(name = "John Doe", age = 30))
doc2 <- fragment("study", person = .elem(name = "John Doe", age = 30))
doc3
doc2
str(doc2)
doc2
devtools::load_all(".")
doc2 <- fragment("study", person = .elem(name = "John Doe", age = 30))
print(n)
print(n)
print(n)
str(n)
print(n)
devtools::load_all(".")
devtools::load_all(".")
doc2 <- fragment("study", person = .elem(name = "John Doe", age = 30))
doc2
f <- fragment(
root = "persoon",
.attr = list(id = "1"),
name = "John Doe",
age = 30,
address = .elem(
street = "123 Main St",
city = "Anytown",
state = "CA",
zip = 12345
)
)
print(f)
f |> xml2::as_xml_document()
