<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Fast and Elegant XML Generation â€¢ xmlwriter</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Fast and Elegant XML Generation">
<meta name="description" content="Provides several simple and fast interfaces for generating XML fragments and documents. It can be used in companion with xml2 to generate XML documents. The fast generator is built using the Rcpp package.">
<meta property="og:description" content="Provides several simple and fast interfaces for generating XML fragments and documents. It can be used in companion with xml2 to generate XML documents. The fast generator is built using the Rcpp package.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">xmlwriter</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="xmlwriter">xmlwriter<a class="anchor" aria-label="anchor" href="#xmlwriter"></a>
</h1></div>
<!-- badges: start -->

<p><code>xmlwriter</code> is an R package that provides a simple interface for creating XML documents and fragments from R. It has a feed-forward API that allows you to write xml in the same order as it appears in an xml document or fragment. Its main goal is to provide a simple and fast way to create xml documents and fragments.</p>
<p><code>xmlwriter</code> can be used as a companion to R package <a href="https://cran.r-project.org/package=xml2" class="external-link"><code>xml2</code></a>, which is a wonderful package optimized for parsing, querying and manipulating XML documents. <code>xml2</code> provides several ways for creating xml documents, but it is not optimized for generating and writing xml.</p>
<p>Creating xml documents with <code>xml2</code> can be a bit cumbersome, because it mostly forces the author to manipulate the xml document tree adding nodes and attributes. It <em>does</em> provide a way to create xml documents from R data structures using nested lists. This is a very powerful feature, but not optimized for speed and readability.</p>
<p><code>xmlwriter</code> provides a more natural interface for creating xml documents, that mimicks the way xml is written in a text editor. It has two different ways to create xml documents:</p>
<ul>
<li>a light weight R syntax using <code>xml_fragment</code> and <code>.elem</code> functions, creating an <code>xml_fragment</code>, that can be easily translated into a xml string or <code>xml2::xml_document</code> object, or be used as a flexible building block for generating a larger xml document.</li>
<li>an <code>xmlbuilder</code> object that allows you to create xml documents in a feed-forward manner, with <code>start</code> and <code>end</code> methods, giving you more control on the xml document structure, including xml comment, prolog etc.</li>
</ul>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of xmlwriter from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"edwindj/xmlwriter"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<div class="section level3">
<h3 id="using-xml_fragment-elem-functions">Using <code>xml_fragment</code>, <code>.elem</code> functions:<a class="anchor" aria-label="anchor" href="#using-xml_fragment-elem-functions"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://edwindj.github.io/xmlwriter/">xmlwriter</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">fragment</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/xml_fragment.html">xml_fragment</a></span><span class="op">(</span></span>
<span>  persoon <span class="op">=</span> <span class="fu"><a href="reference/xml_fragment.html">.elem</a></span><span class="op">(</span></span>
<span>    .attr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>id <span class="op">=</span> <span class="st">"1"</span><span class="op">)</span>,</span>
<span>    name <span class="op">=</span> <span class="st">"John Doe"</span>,</span>
<span>    age <span class="op">=</span> <span class="fl">30</span>,</span>
<span>    address <span class="op">=</span> <span class="fu"><a href="reference/xml_fragment.html">.elem</a></span><span class="op">(</span></span>
<span>       street <span class="op">=</span> <span class="st">"123 Main St"</span>,</span>
<span>       city <span class="op">=</span> <span class="st">"Anytown"</span>,</span>
<span>       state <span class="op">=</span> <span class="st">"CA"</span>,</span>
<span>       zip <span class="op">=</span> <span class="fl">12345</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">fragment</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;persoon id='1'&gt;&lt;name&gt;John Doe&lt;/name&gt;&lt;age&gt;30&lt;/age&gt;&lt;address&gt;&lt;street&gt;123 Main St&lt;/street&gt;&lt;city&gt;Anytown&lt;/city&gt;&lt;state&gt;CA&lt;/state&gt;&lt;zip&gt;12345&lt;/zip&gt;&lt;/address&gt;&lt;/persoon&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fragment</span> <span class="op">|&gt;</span> <span class="fu">xml2</span><span class="fu">::</span><span class="fu"><a href="http://xml2.r-lib.org/reference/as_xml_document.html" class="external-link">as_xml_document</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; {xml_document}</span></span>
<span><span class="co">#&gt; &lt;persoon id="1"&gt;</span></span>
<span><span class="co">#&gt; [1] &lt;name&gt;John Doe&lt;/name&gt;</span></span>
<span><span class="co">#&gt; [2] &lt;age&gt;30&lt;/age&gt;</span></span>
<span><span class="co">#&gt; [3] &lt;address&gt;\n  &lt;street&gt;123 Main St&lt;/street&gt;\n  &lt;city&gt;Anytown&lt;/city&gt;\n  &lt;sta ...</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fragment</span> <span class="op">|&gt;</span> <span class="fu"><a href="reference/as_xml_nodeset.html">as_xml_nodeset</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; {xml_nodeset (1)}</span></span>
<span><span class="co">#&gt; [1] &lt;persoon id="1"&gt;\n  &lt;name&gt;John Doe&lt;/name&gt;\n  &lt;age&gt;30&lt;/age&gt;\n  &lt;address&gt;\n ...</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="using-xmlbuilder-object">Using <code>xmlbuilder</code> object<a class="anchor" aria-label="anchor" href="#using-xmlbuilder-object"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://edwindj.github.io/xmlwriter/">xmlwriter</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/xmlbuilder.html">xmlbuilder</a></span><span class="op">(</span>allow_fragments <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">b</span><span class="op">$</span><span class="fu">comment</span><span class="op">(</span><span class="st">"This is an xml comment"</span><span class="op">)</span></span>
<span><span class="va">b</span><span class="op">$</span><span class="fu">start</span><span class="op">(</span><span class="st">"person"</span>, id <span class="op">=</span> <span class="st">"1"</span><span class="op">)</span></span>
<span>  <span class="va">b</span><span class="op">$</span><span class="fu">element</span><span class="op">(</span><span class="st">"name"</span>, <span class="st">"John Doe"</span><span class="op">)</span></span>
<span>  <span class="va">b</span><span class="op">$</span><span class="fu">element</span><span class="op">(</span><span class="st">"age"</span>, <span class="fl">30</span><span class="op">)</span></span>
<span>  <span class="va">b</span><span class="op">$</span><span class="fu">start</span><span class="op">(</span><span class="st">"address"</span><span class="op">)</span></span>
<span>    <span class="va">b</span><span class="op">$</span><span class="fu">element</span><span class="op">(</span><span class="st">"street"</span>, <span class="st">"123 Main St"</span><span class="op">)</span></span>
<span>    <span class="va">b</span><span class="op">$</span><span class="fu">element</span><span class="op">(</span><span class="st">"city"</span>, <span class="st">"Anytown"</span><span class="op">)</span></span>
<span>    <span class="va">b</span><span class="op">$</span><span class="fu">element</span><span class="op">(</span><span class="st">"state"</span>, <span class="st">"CA"</span><span class="op">)</span></span>
<span>    <span class="va">b</span><span class="op">$</span><span class="fu">element</span><span class="op">(</span><span class="st">"zip"</span>, <span class="fl">12345</span><span class="op">)</span></span>
<span>  <span class="va">b</span><span class="op">$</span><span class="fu">end</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">b</span><span class="op">$</span><span class="fu">start</span><span class="op">(</span><span class="st">"person"</span>, id <span class="op">=</span> <span class="st">"1"</span><span class="op">)</span></span>
<span>  <span class="va">b</span><span class="op">$</span><span class="fu">element</span><span class="op">(</span><span class="st">"name"</span>, <span class="st">"John Doe"</span><span class="op">)</span></span>
<span>  <span class="va">b</span><span class="op">$</span><span class="fu">element</span><span class="op">(</span><span class="st">"age"</span>, <span class="fl">30</span><span class="op">)</span></span>
<span>  <span class="va">b</span><span class="op">$</span><span class="fu">start</span><span class="op">(</span><span class="st">"address"</span><span class="op">)</span></span>
<span>    <span class="va">b</span><span class="op">$</span><span class="fu">element</span><span class="op">(</span><span class="st">"street"</span>, <span class="st">"123 Main St"</span><span class="op">)</span></span>
<span>    <span class="va">b</span><span class="op">$</span><span class="fu">element</span><span class="op">(</span><span class="st">"city"</span>, <span class="st">"Anytown"</span><span class="op">)</span></span>
<span>    <span class="va">b</span><span class="op">$</span><span class="fu">element</span><span class="op">(</span><span class="st">"state"</span>, <span class="st">"CA"</span><span class="op">)</span></span>
<span>    <span class="va">b</span><span class="op">$</span><span class="fu">element</span><span class="op">(</span><span class="st">"zip"</span>, <span class="fl">12345</span><span class="op">)</span></span>
<span>  <span class="va">b</span><span class="op">$</span><span class="fu">end</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">b</span><span class="op">$</span><span class="fu">end</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># includes a xml prolog and comment</span></span>
<span><span class="va">b</span><span class="op">$</span><span class="fu">to_xml_string</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in xmlbuilder_to_string(xb$x): There are still open tags. Closing them</span></span>
<span><span class="co">#&gt; now.</span></span>
<span><span class="co">#&gt; [1] "&lt;?xml version='1.0' encoding='UTF-8'?&gt;&lt;!--This is an xml comment--&gt;&lt;person id='1'&gt;&lt;name&gt;John Doe&lt;/name&gt;&lt;age&gt;30&lt;/age&gt;&lt;address&gt;&lt;street&gt;123 Main St&lt;/street&gt;&lt;city&gt;Anytown&lt;/city&gt;&lt;state&gt;CA&lt;/state&gt;&lt;zip&gt;12345&lt;/zip&gt;&lt;/address&gt;&lt;person id='1'&gt;&lt;name&gt;John Doe&lt;/name&gt;&lt;age&gt;30&lt;/age&gt;&lt;address&gt;&lt;street&gt;123 Main St&lt;/street&gt;&lt;city&gt;Anytown&lt;/city&gt;&lt;state&gt;CA&lt;/state&gt;&lt;zip&gt;12345&lt;/zip&gt;&lt;/address&gt;&lt;/person&gt;&lt;/person&gt;"</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># only contains the actual nodes</span></span>
<span><span class="fu">xml2</span><span class="fu">::</span><span class="fu"><a href="http://xml2.r-lib.org/reference/as_xml_document.html" class="external-link">as_xml_document</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span></span>
<span><span class="co">#&gt; {xml_document}</span></span>
<span><span class="co">#&gt; &lt;person id="1"&gt;</span></span>
<span><span class="co">#&gt; [1] &lt;name&gt;John Doe&lt;/name&gt;</span></span>
<span><span class="co">#&gt; [2] &lt;age&gt;30&lt;/age&gt;</span></span>
<span><span class="co">#&gt; [3] &lt;address&gt;\n  &lt;street&gt;123 Main St&lt;/street&gt;\n  &lt;city&gt;Anytown&lt;/city&gt;\n  &lt;sta ...</span></span>
<span><span class="co">#&gt; [4] &lt;person id="1"&gt;\n  &lt;name&gt;John Doe&lt;/name&gt;\n  &lt;age&gt;30&lt;/age&gt;\n  &lt;address&gt;\n  ...</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level1">
<h1 id="performance">Performance<a class="anchor" aria-label="anchor" href="#performance"></a>
</h1>
<p><code>xmlwriter</code> is optimized for generating xml documents and fragments from R data structures.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/joshuaulrich/microbenchmark/" class="external-link">microbenchmark</a></span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://xml2.r-lib.org/" class="external-link">xml2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://edwindj.github.io/xmlwriter/">xmlwriter</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># read in a sample 600k xml file as a R list str</span></span>
<span><span class="va">doc</span> <span class="op">&lt;-</span> <span class="fu">xml2</span><span class="fu">::</span><span class="fu"><a href="http://xml2.r-lib.org/reference/read_xml.html" class="external-link">read_xml</a></span><span class="op">(</span><span class="st">"./example/DataGeneric.xml"</span><span class="op">)</span></span>
<span><span class="va">doc_list</span> <span class="op">&lt;-</span> <span class="fu">xml2</span><span class="fu">::</span><span class="fu">as_list</span><span class="op">(</span><span class="va">doc</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># copy of the list with an extra attribute class="xml_fragment" (xmlwriter specific)</span></span>
<span><span class="va">doc_list2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span><span class="va">doc_list</span>, class <span class="op">=</span> <span class="st">"xml_fragment"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># see how long it takes to create an xml document with xml2 and xmlwriter</span></span>
<span></span>
<span><span class="fu">microbenchmark</span><span class="op">(</span></span>
<span>  xml2 <span class="op">=</span> <span class="fu">xml2</span><span class="fu">::</span><span class="fu"><a href="http://xml2.r-lib.org/reference/as_xml_document.html" class="external-link">as_xml_document</a></span><span class="op">(</span><span class="va">doc_list</span><span class="op">)</span>,</span>
<span>  xmlwriter <span class="op">=</span> <span class="fu">xml2</span><span class="fu">::</span><span class="fu"><a href="http://xml2.r-lib.org/reference/as_xml_document.html" class="external-link">as_xml_document</a></span><span class="op">(</span><span class="va">doc_list2</span><span class="op">)</span>,</span>
<span>  times <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in microbenchmark(xml2 = xml2::as_xml_document(doc_list), xmlwriter =</span></span>
<span><span class="co">#&gt; xml2::as_xml_document(doc_list2), : less accurate nanosecond times to avoid</span></span>
<span><span class="co">#&gt; potential integer overflows</span></span>
<span><span class="co">#&gt; Unit: milliseconds</span></span>
<span><span class="co">#&gt;       expr        min         lq      mean     median         uq        max</span></span>
<span><span class="co">#&gt;       xml2 2417.94798 2440.25551 2456.7871 2453.37936 2469.68826 2515.33959</span></span>
<span><span class="co">#&gt;  xmlwriter   35.26927   37.12788   38.6148   37.64495   40.21095   42.90047</span></span>
<span><span class="co">#&gt;  neval</span></span>
<span><span class="co">#&gt;     10</span></span>
<span><span class="co">#&gt;     10</span></span></code></pre></div>
</div>

  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing xmlwriter</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Edwin de Jonge <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-6580-4718" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=xmlwriter" class="external-link"><img src="https://www.r-pkg.org/badges/version/xmlwriter" alt="CRAN status"></a></li>
<li><a href="https://github.com/edwindj/xmlwriter/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/edwindj/xmlwriter/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Edwin de Jonge.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
